#include <stdlib.h>
#include <stdio.h>
#include <string.h>

extern char** environ;


int main() {
	printf("\nTOKENIZING THE ENVIRONMENT VARIABLES\n\n\n");
	
	const char delim[2] = "=";
	char ** varName, ** varValue;
	int size = 10;
	varName = (char **)malloc(size * sizeof(char *));
	varValue = (char **)malloc(size * sizeof(char *));

	for (int i = 0; environ[i] != NULL; i++) {
		if(i >= size) {
			size += 10;
			varName = realloc(varName, size * sizeof(char *));
			varValue = realloc(varValue, size * sizeof(char *));
		}
		*(varValue + i) = environ[i];
		*(varName + i) = strtok(*(varValue + i), delim);
		*(varValue + i) = strtok(NULL, delim);
		
		//display
		printf("environ[%d]\n", i);
		printf("name: %s\n", *(varName + i));
		printf("value: %s\n\n", *(varValue + i));
	}
	return 0;
}



